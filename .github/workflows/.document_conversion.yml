name: Documentation Conversion

on: push

jobs:
  convert_via_pandoc:
    runs-on: ubuntu-latest
    container: sddevelopmentbe/docgen:latest
    steps:
      - name: Login to Docker Hub
        uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCHUB_USERNAME }}
          password: ${{ secrets.DOCHUB_GITHUB_ACTIONS }}
      - name: Checkout source code
        uses: actions/checkout@v2
      - name: Start Conversion
        run: |
          echo "Using scripts: $(printf '"$%s" ' /root/docGen/scripts/*.sh)"
          sh /root/docGen/scripts/doc_runner.sh documents/document_sample.md document sdd-base
          sh /root/docGen/scripts/slide_runner.sh documents/slidedeck/docGen-slidedeck.md docgen_slides eisvogel
          sh /root/docGen/scripts/slide_web_runner.sh documents/slidedeck/docGen-slidedeck.md docgen_slides markdown_github
          echo "::set-env name=FILELIST::$(printf '"%s" ' ./documents/*.md)"
      - name: Upload Examples
        uses: actions/upload-artifact@master
        with:
          name: examples
          path: output
